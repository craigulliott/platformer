---
layout: default
title: Action Field
parent: Models
has_children: false
---

An Action Field serves as a specialized mechanism for representing individual
actions that can be executed on a data model. Unlike state machines, which are
designed to manage multiple states and transitions, an Action Field focuses solely
on a single state or operation. This makes it an ideal solution for encapsulating
discrete functionalities such as marking a model as published or archiving it.

A model can have multiple Action Fields, each of which functions independently.

Action fields are backed by two database columnns, one is a boolean column and the
other is a timestamp. The boolean column has an initial state of TRUE and the timestamp
is initially NULL. When the action has occured, the boolean column is set to NULL and
the timetamp is set to the time that the action occured. For example, an action field
named `:published` would have a boolean column named `:unpublished` and a timestamp
column named `:published_at`. Initially `:unpublished` is TRUE and `:published_at` is NULL.
When the`publish` action occurs, `:unpublished` is set to NULL and `:published_at` is
set to the current time. This schema ensures that one of the columns is always NULL and
the other always has a value, which alows for the most flexibility when adding database
constraints and indexes. For example, you can add a unique index on the boolean column
to ensure that a user has only one published model at a time.

Action fields integrate automatically with the callback system, providing a clean and
reliable way to build additional business logic around their transitions.

You can optionally expose an action fields transition methods via a GraphQL mutation,
providing a simple and consistent way to trigger the action from a client application.

```ruby
class MyModel < PlatformerModel
  action_field :name, :action_name
end

```

**Arguments**

name (required Symbol)
:   A name for this action\_field, the name should be a past participle. This name is used to generate the column names. For example, an action field named `:published` would have a boolean column named `:unpublished` and a timestamp column named `:published\_at`.

action\_name (required Symbol)
:   Choose a verb for your action name that clearly describes the action required to transition to the final state. For instance, if your action\_field is named `:published` then a suitable action name would be `:publish`. The inverse action name will be automatically generated by prepending `un` to the action name. So the inverse of `publish` would be `unpublish`.  Corresponding methods will be automtically created for the ActiveRecord class which backs this model. In the example above, the methods would be `publish!` and `unpublish!`.

**Additional Configuration Options**

**Comment**

This method is used to describe a specific use of this
field within a model, this description will be added to
the database column as a comment, and will be used to
generate API documentation.

```ruby
class MyModel < PlatformModel
  action_field :name, :action_name do
    ...
    comment :name, :action_name
    ...
  end
end

```

**Arguments**

comment (required String)
:   The description of this field

**Requires Presence Of**

```ruby
class MyModel < PlatformModel
  action_field :name, :action_name do
    ...
    requires_presence_of :name, :action_name
    ...
  end
end

```

**Arguments**

attribute\_name (required [Symbol])
:   Specify an optional array of field names for the model, each of which must contain a value when the model is completing this action. For instance, triggering the `:publish` action may necessitate that the `:published\_by` field includes a user.

**Requires Absence Of**

```ruby
class MyModel < PlatformModel
  action_field :name, :action_name do
    ...
    requires_absence_of :name, :action_name
    ...
  end
end

```

**Arguments**

attribute\_name (required [Symbol])
:   Specify an optional array of field names for this model, each of which must be empty when the model is completing this action.